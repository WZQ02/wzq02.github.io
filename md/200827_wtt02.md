# 【wzqtechtips#02】探究不同 Windows 版本对应用性能的影响

<notice>本文撰写的时间较为久远。文中的部分内容已不再具有参考价值。</notice>

<notice>
2021: <br>
*分数仅供参考，可能不适用于现在的新平台。这篇文章算是我无聊乱写的。<br>
*原文章是有配图的，因现今留存的图片资料不全，所以部分图片不会在此显示。请读者留意。<br>
*目前这个系列的最后一篇，下次重启这个系列将会是很久以后——如果我打算这么做的话。<br>
*以下为正文。
</notice>

巨硬的“最后一版” 操作系统，2015 年发布的 Windows 10，发布距今已有 5 年的历史。

对于这个操作系统，各界褒贬不一，有人认为新系统更易用，拥有更高的安全性；有人觉得新系统对旧电脑不友好，装了 Win10 后电脑运行速度变慢了；而有人则被这个操作系统的各种问题惹毛了，毅然选择重装回 Win 7；甚至有人因为 Win 10 更新故障频发（其实系统故障未必是微软的锅，你自己瞎操作把系统整坏了怪谁呢），将其称之为“bug 10”。


关于所谓「 Win7 和 Win10 哪个系统好用」，网络上有不少争论。

关于这个问题我觉得，你自己习惯用哪个，就用哪个，这种屁事没必要瞎纠结，而且，这也不是我这期要讨论的重点，不多谈。


装机量方面，现状就是在国内，尽管 Win10 已发布五年之久，多数人的电脑上仍然在运行 Win7，Win10 用户相对较少，甚至还有不少人的电脑，用的还是 2001 年发布的 Windows XP。

![我没记错的话，这是 2019 年左右的统计数据](https://wzq02.top/images/for_hexo/200825182456.png)

xp 作为一个已经年近二十的操作系统，现在还有人用，那说明这系统还是做的很成功的。
不过这也不是重点。
我前段时间就在思考一个问题，同一台电脑上的软件，使用新的操作系统，速度会不会比用旧的系统更快...
先等等，各位注意下，我这里说的是相同软件的运行速度，不是内存磁盘占用、开机快慢啥的，像 7 和 10 的开关机速度测试之类的早就有人做过了，而且众所周知机械硬盘上完整版 Win10 本身的使用流畅度是不如 Win7 的。但无论是开机速度，还是系统本身的流畅度，那是系统自带软件的破事，我这次要对比的可不是这个。我要比较的是，同样的软件，在新的系统上，会不会比在旧的系统上，跑的更快？

先说结论，是不是更快不好说，但差别肯定是有的。
为什么呢？我个人认为，一方面是因为新的操作系统，在内核层面会采用一些手段优化硬件性能，比如使用新的 cpu 调度机制，从而使 cpu 的性能更好地发挥出来，这使得一些大型软件的运行效率得以提升。

![于去年下半年发布的 Win10 1909 使用了新的 CPU 调度机制，优化了 CPU 运行效率](https://wzq02.top/images/for_hexo/200825184424.png)

另一方面，比较新的操作系统，支持一些硬件新特性，比如对某些 cpu 指令集的支持，这也会加快软件的运行速度。

![之前在 xp 上跑 AIDA64 测试的时候，软件提示 xp 系统不支持 AVX 指令集](https://wzq02.top/images/for_hexo/avx_not_supported_winxp.png)

再就是新的操作系统有各种 cpu 漏洞补丁啥的，不过这个是安全补丁，一般倒是会使 cpu 跑的更慢...


不管了。我们来到这次的重点，不同的操作系统上，软件的运行速度，具体会相差多少呢？

为了探寻真相（），我这里准备了一台电脑。
![是不是有点寒酸？（](https://wzq02.top/images/for_hexo/200825185328.png)

这台电脑其实是我以前的主力机，从 2012 年到现在，这台电脑已经服役了 8 年有余。我以前剪视频、做音 MAD，以及我今年上半年在家上网课，都是用的这台电脑。
虽然配置不咋地，但这台电脑，能够完美运行 XP，Win7 和 Win10 三个系统。所以拿这台电脑来测试，再合适不过了。
（其实还有一个原因，就是我做测试的时候，新电脑还没有买...不过拿到新电脑的时候我发现，这新电脑别说 xp 了，win7 都启动不了，实际上新电脑的主板甚至都不支持 CSM）

于是我花了几个小时，给我这台电脑火速（大嘘）安排上了 xp，win7，win10 三系统，并打好驱动。

（8 和 vista 呢？主要是用的人比较少，我就没有考虑在内。说起来我刚开始用这台电脑的时候，其实是用的 win 8，win 7 我倒接触的不是很久）

![Windows XP（xp 也有 64 位的版本，但 xp64 内核版本和原版 xp 不同。考虑到绝大多数人都是用的 32 位的 xp，这里就没用 64 位版，这样测试更能反映多数人用的 xp 的情况）](https://wzq02.top/images/for_hexo/wtt02_xp.png)

![Windows 7（sp1，64 位）](https://wzq02.top/images/for_hexo/wtt02_7.png)

![Windows 10（64 位，2004 版，即 2020 年 5 月更新）](https://wzq02.top/images/for_hexo/wtt02_10.png)

接下来我要做的就是，在这同一台电脑上，在三个不同的系统下，运行常用的跑分软件，并对比三个系统下的分数。

（什么，你说我大 GNU/Linux 没牌面？是没排面，还是国内用的人太少了，而且用 win 的软件和 linux 上的软件比，多少是有点不公平的）

首先我在电脑上运行 CPU-Z，用里面的性能测试工具跑分。先测试 win 10。

Win 10 下 CPU-Z 32 的分数。这里提一下，32 位版 CPU-Z 的分数跟 64 位版没法直接比，如果是用 64 位 CPU-Z 跑的话，分数大概翻个倍

![乍一看还彳亍。接下来是 win 7 的分数，照理说既然 win10 会给近年的硬件做优化，win7 下的分数应该会低一些吧......](https://wzq02.top/images/for_hexo/10_cpuz_rnd1.png)

![](https://wzq02.top/images/for_hexo/7_cpuz_rnd1.png)

怎么回事，win 7 下的分数居然还高个几分？

好吧，可能是 cpu-z 对 win10 没做好优化吧，差个几分也不碍事...咱们来看看 xp 下的分数。

![](https://wzq02.top/images/for_hexo/xp_cpuz_rnd1.png)
这可就拉垮了。

这里放个柱状图，大家感受一下。

![](https://wzq02.top/images/for_hexo/200825213022.png)

xp 明显差一大截。看来巨硬的 nt6 内核比起 xp 时期的 nt5，还是强了不少的。

接下来咱们上 AIDA64 进行测试，先测试内存与缓存性能。

![左：xp  中：win7  右：win10](https://wzq02.top/images/for_hexo/aida64_cache.png)

差别不大。不过在同机器不同系统下，这个指标也没什么意义，毕竟这个是直接反映硬件性能，而不是软件的运行效率的。咱们来测 CPU 分数。

这里直接放表。

![](https://wzq02.top/images/for_hexo/200825215308.png)
![](https://wzq02.top/images/for_hexo/200825215335.png)

前几个测试差异不大。win10 的分数都比 win7 低一点点，xp 又都比 win10 要低一些，但差的不远。

但是在最后一项测试（SHA3 加密性能测试）中，xp 由于不支持我这颗 CPU 的 AVX 指令集，测试分数直接比 win7 和 win10 都低了一大截。

看来巨硬和各大软件开发商放弃 xp 是确有其道理的（（

![当然 steam 这边主要是软件兼容性的原因才放弃 xp 的](https://wzq02.top/images/for_hexo/200825220715.png)
接下来咱们测试文件压缩性能。这里我分别用 7-zip 和 WinRAR 自带的测试跑分。

![Win 10 下 7-zip 分数](https://wzq02.top/images/for_hexo/10_7zip.png)

![win7 的](https://wzq02.top/images/for_hexo/7_7zip.png)

![xp 系统](https://wzq02.top/images/for_hexo/xp_7zip.png)

xp 的分数要比 win7 低一些，这个是意料之中的。

不过 win10 下的分数...就说不过去了。跑分居然比 xp 系统的分数还低？？巨硬啊，您这怕不是也想学嘤特尔，倒吸牙膏吧（半恼）

好吧，我暂且归结为软件优化问题，，，咱们再测测 WinRAR 下的分数。

![10（重点是“已处理 KB /秒”，标黑的那一项）](https://wzq02.top/images/for_hexo/10_winrar.png)

![7](https://wzq02.top/images/for_hexo/7_winrar.png)

![xp](https://wzq02.top/images/for_hexo/xp_winrar.png)

win10 3966，win7 3912，winxp 4018。

相较于 win7，win10 这次总算找回了点面子，得到了比 win7 高的分数。

但是 xp 分数居然还更高一些？这可有点不科学了，那这样的话，xp 岂不是还能再战三十年（bushi



接下来测试视频转码性能。这里我分别用 x264 和 x265 重编码一个 1080p 画质的视频。

![-弟啊，你这压的什么啊？ -日恁毛！](https://wzq02.top/images/for_hexo/200825223537.png)

直接上柱状图。

![](https://wzq02.top/images/for_hexo/200825224706.png)

呃呃，看来 win10 似乎不太适合用来搞压制呢...
好吧，我算是知道为什么现在还有这么多人坚守 win7 了...巨硬宁这负优化，也是真的🐂🍺呢，，

好在这个负优化的幅度不大就是了。显卡性能我懒得测，就从目前网上的游戏性能评测而言， win10 下游戏的帧数倒都是高于 win7 的，也许 win10 的优化主要都在显卡上？

cpu 测试到此为止。接下来看看文件读写性能，这里上 CrystalDiskMark 做测试。这里我用的是一块用了 10 年的老机械硬盘，这里作为测试盘。

![10](https://wzq02.top/images/for_hexo/10_crystaldm.png)

![7](https://wzq02.top/images/for_hexo/7_crystaldm.png)

![xp（似乎 xp 并不支持 16 线程读写？）](https://wzq02.top/images/for_hexo/xp_crystaldm.png)
（我就寻思为啥一个跑分软件画风还这么二次元？直到后来我才知道 CDM 是日本人开发的，也难怪...）

这方面 win10 还是强一点，主要是连续读写和随机写入的跑分更高。

软件是调用 windows 的 API 做读写操作的，不是直接读写扇区。所以这个测试其实能一定程度上反映系统的文件处理性能。


最后跑一下娱乐大师。

![win10 下 鲁大师分数](https://wzq02.top/images/for_hexo/10_ludashi.png)

![win7 的](https://wzq02.top/images/for_hexo/7_ludashi.png)

![xp（xp 不支持 dx11，显卡分直接“掉档”）](https://wzq02.top/images/for_hexo/xp_ludashi.png)

奇怪的是，在上面的 cpu 测试中都拉垮的 win10，在娱乐大师的 cpu 测试中，综合分居然比 win7 要高！

难道鲁大师和巨硬之间有什么不可告人的交...算了我还是别想多了。这分数各位看看就行，仅供参考。

总之，就从我这里的测试结果来看，多数情况下，win10 下软件的运行效率，确实是略逊于 win7，这大概与 win10 激进的安全机制，以及后台繁多的服务项有关。而年迈的 xp 系统，由于缺乏对 cpu 新特性的支持，在一些应用中出现了明显的性能下降。所以，用 xp 系统的大伙们，你们现在又多了一个升级的理由。

话说啊，既然 win10 自带的安全软件，是导致性能下降的一大因素，那为了发挥出 win10 的真实水平，我可以关掉它，至少是暂时禁用掉实时保护的功能。

![](https://wzq02.top/images/for_hexo/200825232332.png)

顺便修改了下注册表，把 win10 的 Meltdown 和 Spectre 补丁也撤下了。这样一波操作之后，重启电脑，之后我又做了一遍测试。

![嗯，cpuz 的跑分稍微高了一点，但还是跑不过 win7...（单核性能是超过了一点）](https://wzq02.top/images/for_hexo/10_cpuz_rnd2.png)

![鲁大师里的 cpu 分数也有小幅的提高。](https://wzq02.top/images/for_hexo/10_ludashi_cpu.png)

虽然关闭安全保护是能提升一点点 cpu 性能，不过我不大推荐关闭保护（尤其是用 SSD 的），毕竟为了一点点性能提升牺牲安全性，似乎不是很好的策略呢。

当然 windows defender 对机械硬盘是不怎么友好，用机械硬盘的可以考虑下某绒...

性能测试也就到此为止了，咱们来整点别的。
（开始跑题（（（（）


win10 广受诟病的一点就是其过高的资源占用。我这里也稍微对比了一下。

以下是我在刚打好驱动且没安装其他软件的情况下，三个系统中的任务管理器截图。

![有一说一，win10 的任务管理器确实好用，系统的各项信息，都能看得清清楚楚](https://wzq02.top/images/for_hexo/10_ramusage.png)

![win7](https://wzq02.top/images/for_hexo/7_ramusage.png)

![xp](https://wzq02.top/images/for_hexo/xp_ramusage.png)

CPU 资源占用方面，完整版的 win10 后台的服务项很多，加上后台的 UWP（通用 Windows 平台）应用也会占用系统资源，使得整机即使是闲置，cpu 总会有那么点占用率。

内存方面，在这台总内存 4G 的电脑上，winxp 只占用了 231MB 的内存，真不愧是低内存电脑的大救星。

其实 xp 不打驱动的话内存占用还可以更低。这应该是最后一版内存占用如此小的 windows 了，nt6 系的系统（vista 及之后）就没有省内存的...

win7 占用 938MB，这个占用，比 win7 之前的 windows vista 稍微少一些，在这台总内存 4GB 的电脑上，也还算能接受吧..

而 win10 的内存占用直逼 2GB，直接占了一半，这可还是我什么软件都没开的情况下。看来 win10 高资源占用名不虚传...

（喂你以前一直用的win10啊你还会不知道吗kora！）



经过一番排查，我发现其实 win10 系统内存占用如此之高，与 win10 的 UWP 应用有很大关系。

因为在我把 win10 附带的几乎所有 UWP 应用卸载掉以后，内存占用一下降到了 1G 多一点...

![其实这里我还把 Windows Defender 关了，也能省个 200M 内存](https://wzq02.top/images/for_hexo/200826213101.png)

虽然一般情况下，光是卸载软件其实省不了多少内存占用，但是 win10 的 UWP 应用，即使不打开，也会常驻在系统后台，占据额外的内存。

这让我想起了安卓手机的后台应用常驻...

（不是，我寻思巨硬是不是真把咱们的电脑当手机处理了？气抖冷，我们电脑党什么时候能站起来）



之前我看有人推荐过 Windows 10 LTSC（长期支持）版，因为其“在低配电脑上能运行的很流畅，体验堪比 win7 ”

其实 LTSC 除了更新策略不同以外，本质上就是个删光了 UWP 应用的 Windows 10 1809，所以才有更低的资源占用。

所以说如果你是在低配机用 win10 ，而你又完全用不上 UWP 应用，你可以考虑卸载掉 Microsoft Edge 以外的所有 UWP 应用（具体方法请百度，当然你要是用不上 Edge 也可以卸），这样系统会流畅不少。


视频播放方面，因为我的显卡足够老，有适配 xp 的驱动。在 xp 系统上用 MPC-HC 播放器，硬解 1080p60 视频没毛病。

![](https://wzq02.top/images/for_hexo/200826223849.png)

不过用 xp 系统的缺点就是，xp 默认使用的 VMR 视频渲染器，视频画面效果比起 win7 和 win10 下用的 EVR 渲染器，要差一些。

![win7 下默认使用 EVR 视频渲染器](https://wzq02.top/images/for_hexo/7_evr_available.png)
win7 和 win10 下的视频播放也很流畅。

拿本地视频播放来评测性能也太便宜这台电脑了，来，咱们看看在线视频的播放效果。


![Getting offensive......](https://wzq02.top/images/for_hexo/200714163419.jpg)

额，首先我要说一下，这个 AMV 其实做的挺不错的。

不过这个视频，大概是因为弹幕数量过多，而很多电脑都带不动这么多弹幕，后来就变成了电..脑..性..能..测..试..视..频...

就挺离谱的。

那我就拿这个视频做测试吧！（一转）

这里我都使用 firefox 浏览器，开弹幕播放上面这个视频。先看看 winxp 下的表现。

xp 系统下，播放到弹幕多的时候，弹幕出现卡顿。cpu 占用率大概在 50% 左右。

win7 和 win10 下也有出现卡顿，不过流畅度都还是比 xp 下强一些的...cpu 占用率也差不多，占一半。

（其实这东西吃的是我那张亮机显卡，我在 win10 下测试的时候才看出来...win7 和 xp 的任务管理器都不显示 GPU 占用的）

三系统下视频播放都还算流畅，卡的只是弹幕，所以目前老系统还是能应付视频播放的（前提是系统安装了对应的显卡驱动）


其他的测试我也懒得做了。我这里做个总结吧：
至少在我这台电脑上，win10 下软件的性能表现其实是稍逊于 win7 的，加之 win10 资源占用高，而且直到现在 win10 系统还有被爆出存在各种恶性 bug（其实我这边倒还好），目前许多人还在坚守 win7 也就不难理解了。
（虽然微软在年初停止了对 win7 的支持，但考虑到国内许多 win7 用户从一开始就是禁用系统自动更新的，短期内这个停止支持并不会对国内用户有什么影响）

我自己倒是从 win10 发布以来就一直在用 win10 系统，虽然是有些小毛病，但它的 Fluent Design 设计体系、数据同步、多桌面及时间线等新功能、以及对新软硬件的良好支持，使得我在这近五年都一直将其作为我的主力系统使用。而且 win10 本身就有在不断更新，从 2015 年的 1507 版，到现在的 2004 版，这个系统已经被打磨的更为易用。

至于 winxp，我个人是建议能升级就升级，至少升到 win7 以上。不过现在 xp 系统还没到达完全没法用的程度，至少其运行起现在的软件来，性能虽不如新的系统，但很多时候与新系统差距不大。考虑到 xp 系统极低的内存占用，对于那些内存容量不足 512MB 的电脑，xp 仍将是更好的选择。（不过这种电脑应该已经很少见了吧...）

这篇文章中的内容其实也只能代表一家之言，在这里仅供各位参考，毕竟我这台测试电脑是有点老了，可能不是很能反映现在的电脑的情况。

最后再提一点吧，我觉得在电脑软硬件上面“饭圈化”是很↓↑的行为。
硬要争论所谓哪个软件，哪个版本好用，没什么意义。踩一捧一真的没意思，好不好用不还是得取决于个人的吗，别人用的什么系统/软件，管你屁事啊。

全文完。除专有内容外，本文其他部分使用 CC0 1.0 协议发布。