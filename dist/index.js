function autord(){var e=window.location.href;-1==e.indexOf(".top:")&&-1==e.indexOf(".215")||(window.location.href="https://wzq02.top/")}autord();var visited=localStorage.getItem("visited");null==visited&&localStorage.setItem("visited","1");var lbiv=setInterval(function(){window.i18nextify.i18next.isInitialized&&(document.getElementsByClassName("rt_title")[0].childNodes[1].style="animation:appear .25s",clearInterval(lbiv))},200),lock_lnk=1,showlt="";function lnklist(){var e=document.getElementById("othlnks");document.getElementById("lt");"block"==e.style.display?lock_lnk&&(lock_lnk=0,e.style.animation="lnkhide 0.2s cubic-bezier(1, 0, 1, 1) 1",setTimeout(function(){e.style.animation="",e.style.display="none"},"195"),setTimeout(function(){lock_lnk=1},"200")):(lock_lnk=0,clearTimeout(showlt),e.style.display="block",setTimeout(function(){lock_lnk=1},"250"))}function chglang(){var e;e=-1!=window.i18nextify.i18next.language.indexOf("zh")?"en":"zh",localStorage.setItem("i18nextLng",e),window.i18nextify.init();var t=new XMLHttpRequest;t.open("get","locales/"+e+"/translation.json"),t.send(null),t.onload=function(){setTimeout(function(){window.i18nextify.forceRerender()},50)}}var lock1=1;function scrolltopage2(){lock1&&(lock1=0,scrolltopage2a(),setTimeout(function(){lock1=1},"500"))}function scrolltopage2a(){var e=document.getElementById("centerpic_container"),t=document.getElementById("links"),n=document.getElementById("page2");e.style.animation="pg1go 0.15s cubic-bezier(0.4, 0, 1, 0) 1",t.style.animation="disappear 0.5s 1",setTimeout(function(){n.style.animation="pg2showup 0.35s cubic-bezier(0, 0.4, 0, 1) 1",n.style.display="flex",e.style.display="none"},"150"),setTimeout(function(){t.style.display="none"},"500");var i=document.getElementById("othlnks");document.getElementById("lt");"block"==i.style.display&&(setTimeout(function(){i.style.animation="lnkhide 0.15s cubic-bezier(1, 0, 1, 1) 1"},"150"),setTimeout(function(){i.style.animation="",i.style.display="none"},"245")),document.querySelector("#dot_1").classList.remove("highlighted_dot"),document.querySelector("#dot_2").classList.add("highlighted_dot"),document.getElementsByClassName("rt_title")[0].classList.add("inpage2")}function scrolltopage1(){lock1&&(lock1=0,scrolltopage1a(),setTimeout(function(){lock1=1},"500"),-1!=window.location.href.indexOf("#/")&&(window.location.href="#/"))}function scrolltopage1a(){var e=document.getElementById("centerpic_container"),t=document.getElementById("links"),n=document.getElementById("page2");n.style.animation="pg2go 0.15s cubic-bezier(0.4, 0, 1, 0) 1",setTimeout(function(){n.style.display="none",t.style.display="block"},150),null==document.querySelector("#animbg")&&(setTimeout(function(){e.style.display="block"},250),e.style.animation="pg1showup 0.35s cubic-bezier(0, 0.4, 0, 1) 1"),t.style.animation="appear 0.5s 1",document.querySelector("#dot_1").classList.add("highlighted_dot"),document.querySelector("#dot_2").classList.remove("highlighted_dot"),document.getElementsByClassName("rt_title")[0].classList.remove("inpage2")}var scrollFunc=function(e){e=e||window.event;document.getElementsByClassName("secdisplay")[0];e.wheelDelta<0?setTimeout(function(){scrolltopage2()},0):e.wheelDelta>0?scrolltopage1():e.detail>0?setTimeout(function(){scrolltopage2()},0):e.detail<0&&scrolltopage1()};function loadJS(e,t){var n=document.createElement("script");n.type="text/javascript",n.src=e,n.onload=function(){t()},document.head.appendChild(n)}document.querySelector("#main").addEventListener("DOMMouseScroll",scrollFunc,!1),document.querySelector("#main").onmousewheel=scrollFunc,-1!=window.location.hostname.indexOf(".github.io")&&(window.addEventListener("load",function(){document.title+=i18nextify.i18next.t(" (Mirror)")}),"zh-CN"==navigator.language?console.log("您正在访问 WZQ'02 的小站的镜像版本。主站地址为 https://wzq02.top/"):console.log("You're visiting the mirror version of WZQ'02's site. The main site is at https://wzq02.top/"));let loadbar_lock=0,loadbar_status=0;function addloadbar(){let e=document.createElement("div");e.id="loadingbar",document.body.appendChild(e)}addloadbar();const ld_bar=document.getElementById("loadingbar");function loadbarstart(){loadbar_lock||0!=loadbar_status||(loadbar_lock=loadbar_status=1,setTimeout(()=>{loadbar_lock=0},1500),ld_bar.style.opacity=1,ld_bar.style.animation="lb_anim1 15s cubic-bezier(.2, .6, .2, 1) 1")}function loadbarend(){1==loadbar_status&&(loadbar_lock=1,loadbar_status=0,ld_bar.style.opacity=0,setTimeout(()=>{ld_bar.style.animation="",loadbar_lock=0},1e3))}function createwindow(e,t,n,i,o,s,a){document.getElementsByClassName("window")[0]&&destroywindow(1);const l=document.createElement("div");l.className="wn_bg",document.body.appendChild(l);const c=document.createElement("div");c.className="window",c.id=e;const d=document.createElement("div");let r;if(d.className="wn_dragpart",d.style="position:absolute;width:100%;height:48px",c.appendChild(d),n&&void 0!==n[1])c.style=r=`width:${n[0]}px;height:${n[1]}px;`;else switch(n){case 1:c.classList.add("medwindow");break;case 2:c.classList.add("largewindow");break;default:c.classList.add("smallwindow")}if(i&&c.classList.add("blur_bg"),o&&(d.addEventListener("mousedown",function(e){c.style.transitionDuration="0s";let t=e.clientX-c.offsetLeft,n=e.clientY-c.offsetTop;function i(e){c.style.top=e.clientY-n+"px",c.style.left=e.clientX-t+"px"}document.addEventListener("mousemove",i),d.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",i),c.style.transition=""})}),d.addEventListener("touchstart",function(e){c.style.transitionDuration="0s";let t=e.targetTouches[0],n=t.clientX-c.offsetLeft,i=t.clientY-c.offsetTop;function o(e){let t=e.targetTouches[0];c.style.top=t.clientY-i+"px",c.style.left=t.clientX-n+"px"}document.addEventListener("touchmove",o),d.addEventListener("touchend",()=>{document.removeEventListener("touchmove",o),c.style.transition=""})})),s){let e=document.createElement("span"),t=document.createElement("img");e.className="wn_closebtn fsb",e.onclick=(()=>{window_fullscreen()}),t.src="/assets/icons/mdi/fullscreen.svg",t.id="wn_fsb",c.appendChild(e),e.appendChild(t)}if(l.appendChild(c),a&&"object"==typeof a&&a.getBoundingClientRect().width){c.style.opacity=0;const e=a.getBoundingClientRect(),t=c.getBoundingClientRect();c.style=`left:${e.left}px;top:${e.top}px;width:${e.width}px;height:${e.height}px;margin:0px;transition:none`,setTimeout(()=>{c.style=`left:${t.left}px;top:${t.top}px;width:${t.width}px;height:${t.height}px;margin:0px;transition:.4s cubic-bezier(.45,.15,0,1)`},5),setTimeout(()=>{c.style=r||""},400)}else c.style.animation="secshowup2 0.4s cubic-bezier(0, 0.6, 0, 1) 1";if(t){const e=document.createElement("span"),t=document.createElement("img");e.className="wn_closebtn",e.onclick=(()=>{destroywindow()}),t.src="/assets/icons/mdi/close.svg",c.appendChild(e),e.appendChild(t)}}function destroywindow(e){const t=document.getElementsByClassName("wn_bg")[0],n=document.getElementsByClassName("window")[0];function i(){t.removeChild(n),document.body.removeChild(t)}if(e)return void i();let o=" 0.2s cubic-bezier(0.6, 0, 1, 0.6) 1";n.style.animation="secgo"+o,t.style.animation="disappear"+o,setTimeout(()=>{i()},"195")}function window_fullscreen(){let e=document.getElementsByClassName("window")[0],t=document.getElementById("wn_fsb");-1!=e.classList.toString().indexOf("fullscreenwindow")?(t.src="/assets/icons/mdi/fullscreen.svg",e.classList.remove("fullscreenwindow")):(t.src="/assets/icons/mdi/fullscreen-exit.svg",e.classList.add("fullscreenwindow"))}function createiframewindow(e,t){createwindow("iframe_w",1,2,0,0,1,0,0);const n=document.createElement("iframe");n.src=e,n.style="position:relative;top:-56px;width:100%;height:100%;border-radius:4px",n.name=t,document.getElementsByClassName("window")[0].appendChild(n)}function createobjwindow(e,t){createwindow("object_w",1,2,0,0,1,0,0);const n=document.createElement("object");n.data=e,n.style="position:relative;top:-56px;width:100%;height:100%;border-radius:4px",n.name=t,n.type="text/html",document.getElementsByClassName("window")[0].appendChild(n)}function createalert(e,t){createwindow("alert",1,0,1,1,0);const n=current=document.getElementsByClassName("window")[0];t&&(n.style.height=t+"px");const i=document.createElement("div");i.className="wn_text",i.innerHTML=e,n.appendChild(i),i18nextify.i18next.isInitialized&&window.i18nextify.forceRerender()}function createxmlwindow(e,t,n,i,o,s,a){createwindow("xml",1,t,1,n,i,o),loadbarstart();let l=new XMLHttpRequest;l.open("get","/xml/"+e+".xml"),l.send(null),l.onload=(()=>{loadbarend(),200==l.status?renderxmlwindow(l.responseText,s,a):renderxmlwindow("<h2>没有找到指定的文档……(ﾟДﾟ≡ﾟдﾟ)!?</h2>")})}function renderxmlwindow(content,t,e,forpage){let cur;const inn=document.createElement("div");inn.className="wn_text",forpage?(cur=document.getElementById("xmlpage"),inn.className+=" p3"):cur=document.getElementsByClassName("window")[0],t&&(content="<h1>"+t+"</h1>"+content),inn.innerHTML=content,inn.style.animation="appear .25s",cur.appendChild(inn),eval(e)}let md_tags_list,marked_loaded,showdown_loaded,marked_failed;const showdown_path="/scripts/3rdparty/showdown.min.js",marked_path="/scripts/3rdparty/marked.min.js",icon_path="/assets/icons/mdi/";function gettaglist(){let e=new XMLHttpRequest;e.open("get","/json/md_tags.json"),e.send(null),e.onload=(()=>{200==e.status&&(md_tags_list=JSON.parse(e.responseText))})}function createmdwindow(e,t,n,i,o){function s(){getmdfile(e,t,n,i,o)}createwindow("md",1,2,1,0,1,document.getElementById(e)),marked_failed&&(t=1),t&&!showdown_loaded?loadJS(showdown_path,()=>{s(),showdown_loaded=1}):marked_loaded?s():loadJS(marked_path,()=>{if(void 0===window.marked)return t=1,void loadJS(showdown_path,()=>{s(),showdown_loaded=1,marked_failed=1});s(),marked_loaded=1})}function getmdfile(e,t,n,i,o){if(!n)try{n=md_tags_list[e].date||null,i=md_tags_list[e].tags||null}catch(e){}o&&(o=e),window.i18nextify&&-1!=window.i18nextify.i18next.language.indexOf("en")?getmdfile2(e,t,n,i,o,1):getmdfile2(e,t,n,i,o)}function getmdfile2(e,t,n,i,o,s){let a,l=new XMLHttpRequest;1==s?l.open("get","/md/en/"+e+".md"):l.open("get","/md/"+e+".md"),l.send(null),loadbarstart(),l.onload=(()=>{loadbarend(),200==l.status?rendermdwindow(a=l.responseText,t,n,i,o,s):1==s?getmdfile2(e,t,n,i,o,2):rendermdwindow("## 没有找到对应的文章额...")})}function rendermdwindow(e,t,n,i,o,s){let a,l,c,d=document.getElementsByClassName("window")[0],r=document.createElement("div");if(r.className="wn_text mdwn",t){let t=e;(new showdown.Converter).makeHtml(t)}else a=e,l=marked.parse(a);n&&i?c="<p class='article_top_text'><img src='"+icon_path+"time.svg'>&nbsp;"+n+"&nbsp;&nbsp;&nbsp;<img src='"+icon_path+"tag.svg'>&nbsp;"+i+"</p>":n&&(c="<p class='article_top_text'><img src='"+icon_path+"time.svg'>&nbsp;"+n+"</p>"),2==s&&(c+="<notice>This article is not available in English yet. Consider using browser translation.</notice>\n"),n&&(l=0==l.indexOf("<h1>")?l.slice(0,l.indexOf("</h1>")+5)+c+l.slice(l.indexOf("</h1>")+5):c+l),r.innerHTML=l;for(let e=0;e<128&&r.childNodes[e];e++)if("object"==typeof r.childNodes[e].childNodes[0]&&r.childNodes[e].childNodes[0].alt){let t=document.createElement("p");t.innerText=r.childNodes[e].childNodes[0].alt,t.style="opacity: 0.75; text-align: center",r.childNodes[e].appendChild(t)}if(o){let e=document.createElement("object");e.data="/comment/?type=blog_"+o,e.width="100%",e.height="440",e.type="text/html",r.appendChild(e)}r.style="opacity:0",document.getElementsByClassName("mdwn")[0]&&d.removeChild(document.getElementsByClassName("mdwn")[0]),d.appendChild(r),setTimeout(function(){r.style=""},5)}function createmdprompt(e,t,n,i,o){createmdwindow(e,t,n,i,o)}function p2l_sc(e,t){xmlpage("p3/"+e,t),window.history.pushState({page:1},"","/"+e),title_update()}gettaglist(),(()=>{const json_path="/json/p2_list/list.json",p2=document.getElementById("page2"),ls=document.createElement("div");ls.id="p2_list";const cn=document.createElement("div");cn.id="p2l_cont";let req=new XMLHttpRequest;req.open("get",json_path),req.send(null),req.onload=(()=>{if(200==req.status){const list=JSON.parse(req.responseText);for(let i=0;i<list.length;i++){const item=document.createElement("div");item.className="p2l_item",item.id="pi_"+list[i].id;const cont=document.createElement("div");cont.className="pi_cont";const icon=document.createElement("div");icon.className="pc_icon",icon.innerHTML="<img src='"+list[i].icon+"'/>";const text=document.createElement("div");text.className="pc_text",text.innerHTML="<div>"+list[i].title+"</div><span>"+list[i].desc+"</span>",cont.appendChild(icon),cont.appendChild(text),item.appendChild(cont),cn.appendChild(item),item.addEventListener("mouseup",()=>{eval(list[i].func)})}ls.appendChild(cn),p2.appendChild(ls)}})})();const default_title="WZQ'02's site",title_list={bl:"Blog",fs:"Files",pr:"Projects",de:"Games and Tools",ab:"About"};function title_update(){let e=window.location.pathname,t=default_title;setTimeout(()=>{"/"!=e&&(t=title_list[e.slice(1,3)]+" | "+default_title),document.title=i18nextify.i18next.t(t)},50)}let verinfo,p3_show,p3_allowdestroy,dxp_a1,dxp_a2,p3_noallownew;function getver(){var e=new XMLHttpRequest;e.open("get","/json/ver.json"),e.send(null),e.onload=(()=>{200==e.status&&(verinfo=JSON.parse(e.responseText),console.log("WZQ'02's site 3.2. version "+verinfo.version))})}function about_printver(){document.getElementById("site_upd_date").innerText=verinfo.version}function router_reset(){window.history.pushState({page:1},"","/"),title_update()}function ps_check(){switch(window.location.pathname.slice(0,3)){case"/bl":blog_cut_check(),p2l_sc("blog","createbloglinks()");break;case"/fs":p2l_sc("fs","sche_init()");break;case"/pr":p2l_sc("proj","sche_init()");break;case"/de":p2l_sc("demo","sche_init()");break;case"/ab":p2l_sc("about","about_printver()")}title_update()}function blog_cut_check(){let e=window.location.pathname.slice(6);e&&createmdwindow(e,0,null,null,1)}function xmlpage(e,t){if(p3_noallownew)return;p3_show&&destroyxmlpage(1),clearTimeout(dxp_a2);const n=document.createElement("div");n.id="xmlpage";const i=document.createElement("div");i.id="xp_close",i.innerHTML="<img src='/assets/icons/mdi/close.svg'/>",n.appendChild(i),p3_show=1,p3_noallownew=1,p3_allowdestroy=0,document.body.appendChild(n),n.style.display="none",setTimeout(()=>{n.style.display=""},100);const o=document.getElementById("main");o.style.animation="pg1go 0.15s cubic-bezier(0.4, 0, 1, 0) 1",setTimeout(()=>{o.style="animation:none;opacity:0",p3_allowdestroy=1,p3_noallownew=0},145),i.addEventListener("mouseup",()=>{destroyxmlpage()}),loadbarstart();let s=new XMLHttpRequest;s.open("get","/xml/"+e+".xml"),s.send(null),s.onload=(()=>{200==s.status?(loadbarend(),renderxmlpage(s.responseText,t),window.i18nextify.forceRerender()):renderxmlpage("<h2>没有找到指定的文档……(ﾟДﾟ≡ﾟдﾟ)!?</h2>")})}function destroyxmlpage(e){if(!p3_allowdestroy)return;const t=document.getElementById("xmlpage"),n=document.getElementById("main");function i(){document.body.removeChild(t),p3_show=0}function o(){n.style="animation: none"}e?(i(),o(),clearTimeout(dxp_a1),clearTimeout(dxp_a2)):(t.style.animation="pg2go 0.15s cubic-bezier(0.4, 0, 1, 0) 1",dxp_a1=setTimeout(()=>{i(),n.style.animation="pg1showup 0.35s cubic-bezier(0, 0.4, 0, 1) 1"},145),dxp_a2=setTimeout(()=>{o()},495)),router_reset()}function renderxmlpage(e,t){p3_show&&renderxmlwindow(e,null,t,1)}window.addEventListener("load",()=>{getver()}),window.addEventListener("load",()=>{switch(window.location.hash){case"#/dl":window.history.pushState({page:1},"","/fs");break;case"#/tv":window.history.pushState({page:1},"","/proj");break;case"#/demos":window.history.pushState({page:1},"","/demo");break;case"#/about":window.history.pushState({page:1},"","/about")}ps_check()}),window.addEventListener("popstate",()=>{"/"==window.location.pathname&&destroyxmlpage(),ps_check()});var swup_allow_flag=1,bodyscroll=new Hammer(document.querySelector("#main"));function up_action(){swup_allow_flag&&scrolltopage2()}function down_action(){scrolltopage1()}function hidegfsites(){var e=localStorage.getItem("gfs"),t=document.getElementsByClassName("outcn");if(Date.parse(new Date)/1e3-e<86400)for(var n=0;n<t.length;n++)t[n].style.display="inline";else for(n=0;n<t.length;n++)t[n].style.display="none"}bodyscroll.get("swipe").set({direction:Hammer.DIRECTION_VERTICAL}),bodyscroll.on("swipeup",function(){up_action()}),bodyscroll.on("swipedown",function(){down_action()}),bodyscroll.on("panup",function(){up_action()}),bodyscroll.on("pandown",function(){down_action()}),hidegfsites();var dg_wkr=new Worker("/scripts/g_detect.js");function cp_th(){const e=document.getElementById("centerpic_container"),t=document.createElement("div");t.id="touchhold_cont";let n="/assets/images/touchhold/th_",i="class='touchhold_sv'",o="/assets/audio/touchhold/th_";t.innerHTML="<img "+i+" id='t1' src='"+n+"inn_1.svg' /><img "+i+" id='t2' src='"+n+"inn_2.svg' /><img "+i+" id='t3' src='"+n+"inn_3.svg' /><img "+i+" id='t4' src='"+n+"inn_4.svg' /><img "+i+" id='t5' src='"+n+"inn_cir.svg' /><img "+i+" id='t6' src='"+n+"outer.svg' /><audio id='thad_touch' src='"+o+"touch.ogg'></audio><audio id='thad_riser' src='"+o+"riser.ogg'></audio><audio id='thad_hanabi' src='"+o+"hanabi.ogg'></audio>",e.appendChild(t);let s,a,l=0,c="transition:none;animation:flick .07s infinite",d=3;function r(){l||(t.style.opacity=.15,l=1,s=setTimeout(()=>{t.style="",l=0},5e3)),2==l&&(t.style="transition:none;opacity:.25",a=0)}function p(){if(1==l){clearTimeout(s),t.style=c,u(1);let i=document.getElementById("t6");i.style="display:block;animation:th_anim1 "+d+"s linear",l=2,a=1,setTimeout(()=>{t.style="transition:.15s",i.style="",l=3,a?function(){!function(){let t=document.createElement("div");t.id="t_circle",e.appendChild(t);let i=document.createElement("img");i.src=n+"firwks1.svg",i.id="t_fire",e.appendChild(i),setTimeout(()=>{t.style="display:none"},245),setTimeout(()=>{i.style="display:none"},745),document.getElementById("thad_hanabi").play()}();let t=document.createElement("a");t.title="舞萌 DX 好友码",t.onmouseup=(()=>{createxmlwindow("maimai_friend_code",0,1)}),t.innerHTML="<div class='othlnk'><span>舞萌 DX 好友码</span></div>",document.querySelector("#othlnks").appendChild(t)}():setTimeout(()=>{t.style="",l=0,u()},1e3)},1e3*d),document.getElementById("thad_touch").play(),document.getElementById("thad_riser").play()}2==l&&(t.style=c,a=1)}function u(e){for(let t of["t1","t2","t3","t4"]){let n=document.getElementById(t);n.style=e?"transform: translate(0px,0px)":""}}t.onmouseup=(()=>{r()}),t.onmousedown=(()=>{p()}),t.ontouchend=(()=>{r()}),t.ontouchstart=(()=>{p()}),t.ondragstart=(e=>{e.preventDefault()})}dg_wkr.onmessage=function(e){0==e.data&&(localStorage.setItem("gfs",Date.parse(new Date)/1e3),hidegfsites())},cp_th();const pic_list=["front_1","front_2","front_3","front_4","front_5","front_6","front_7","front_8","front_9","front_10","front_11","front_12"];let pic_size=96,last_msd_pos=[],d2sa_flag=0,timeoutcpposchg;function centerpic_initialize(){let e=document.getElementById("centerpic_container"),t=document.createElement("div");t.style="width: 100vw; height: 100vh;",t.onmousedown=function(e){last_msd_pos[0]=e.clientX,last_msd_pos[1]=e.clientY},t.onmouseup=function(e){last_msd_pos[0]==e.clientX&&last_msd_pos[1]==e.clientY&&(cp_pos_changeall(),click_record())},e.appendChild(t);for(let t=0;t<pic_list.length;t++){let n=document.createElement("picture");n.className="centerpic_picelement",n.id=pic_list[t],n.style.position="absolute",n.style.left="calc(50vw - "+pic_size/2+"px)",n.style.top="calc(50vh - "+pic_size/2+"px)";let i=cp_pos_initialize();n.style.transform="translate("+i[0]+"px,"+i[1]+"px) rotate("+360*Math.random()+"deg)",n.style.opacity=.6,n.style.transition="transform 1s cubic-bezier(0.05, 0.2, 0, 1), opacity 0.25s";let o=document.createElement("source");o.srcset="/assets/images/centerpic/"+pic_list[t]+".webp",o.type="image/webp";let s=document.createElement("img");s.src="/assets/images/centerpic/"+pic_list[t]+".png",s.height=pic_size,s.width=pic_size,s.style.opacity=0,s.setAttribute("onload","let a=document.querySelector('#"+pic_list[t]+"').childNodes[1];a.style.opacity=1;a.style.transition='0.25s';"),n.appendChild(o),n.appendChild(s),n.ondragstart=function(e){e.preventDefault()},e.appendChild(n)}pic_size_adj(),setTimeout(function(){cp_pos_changeall()},5),ctpc_asfx("front_3","c_s_cha","cha"),ctpc_asfx("front_6","c_s_sb","sb")}function ctpc_asfx(e,t,n){const i=document.createElement("audio");i.id=t,i.src="/assets/audio/centerpic/"+n+".ogg",document.getElementById("centerpic_container").appendChild(i),document.getElementById(e).addEventListener("mouseup",function(){i.currentTime=0,i.play()})}function cp_pos_initialize(){let e=Math.ceil(4*Math.random()),t=window.innerWidth,n=window.innerHeight;switch(e){case 1:return[-.5*t,n*(Math.random()-.5)];case 2:return[t*(Math.random()-.5),-.5*n];case 3:return[.5*t,n*(Math.random()-.5)];case 4:return[t*(Math.random()-.5),.5*n]}}function pic_size_adj(){pic_size=window.innerWidth<=864||window.innerHeight<=640?96:144;for(let e=0;e<pic_list.length;e++){let t=document.querySelector("#"+pic_list[e]);t.childNodes[1].height=pic_size,t.childNodes[1].width=pic_size}}function cp_resize_control(){timeoutcpposchg&&clearTimeout(timeoutcpposchg),timeoutcpposchg=setTimeout(function(){cp_pos_changeall(),pic_size_adj()},250)}function cp_pos_change(e,t){let n=document.getElementById(e),i=-.5,o=.8,s=-.5,a=.8;switch(t){case 1:i=-1.4,o=.4,a=1;break;case 2:i=.4,o=.4,a=1;break;case 3:o=1,s=.4,a=.4;break;case 4:o=1,s=-1.4,a=.4}n.style.transform="translate("+window.innerWidth*(Math.random()+i)*o+"px,"+window.innerHeight*(Math.random()+s)*a+"px) rotate("+360*Math.random()+"deg)"}function cp_pos_changeall(e){if(swup_allow_flag){for(let t=0;t<pic_list.length;t++)cp_pos_change(pic_list[t],e);d2sa_flag=0}}function cp_rewoke(){window.onresize=function(){cp_resize_control()};for(let e=0;e<pic_list.length;e++){let t=cp_pos_initialize();document.querySelector("#"+pic_list[e]).style.transform="translate("+t[0]+"px,"+t[1]+"px) rotate("+360*Math.random()+"deg)"}setTimeout(function(){cp_pos_changeall()},5)}centerpic_initialize(),window.onresize=function(){cp_resize_control()};let pic_swipe=new Hammer(document.getElementById("centerpic_container"));pic_swipe.on("swipeleft",function(){cp_pos_changeall(1),click_record()}),pic_swipe.on("swiperight",function(){cp_pos_changeall(2),click_record()}),pic_swipe.on("swiperight",function(){cp_pos_changeall(2),click_record()});let pic_swipe_2=new Hammer(document.getElementById("centerpic_container"));function cp_addprop(){for(let e=0;e<pic_list.length;e++){let t=document.getElementById(pic_list[e]);t.onmouseover=function(){t.style.opacity=1},t.onmousedown=function(){t.style.opacity=.35},"front_9"==t.id?t.onmouseup=function(){t.style.opacity=1,liubing_trigger()}:"front_11"==t.id?t.onmouseup=function(){2!=d2sa_flag?d2sa_flag?d2sa_flag=2:cp_pos_change("front_11"):d2sa_action()}:t.onmouseup=function(){t.style.opacity=1,cp_pos_change(t.id),click_record()},t.onmouseout=function(){t.style.opacity=.6}}}pic_swipe_2.get("swipe").set({direction:Hammer.DIRECTION_VERTICAL}),pic_swipe_2.on("swipedown",function(){cp_pos_changeall(3),click_record()}),pic_swipe_2.on("swipeup",function(){cp_pos_changeall(4),click_record()}),cp_addprop();let liubing_status=0,lbsb_autoremove,lbaudio,lbtrigger=0,lbm,lbn,dj=document.querySelector("#front_9").childNodes[1],djanim_timeout;function liubing_trigger(){1!=lbtrigger?(lbtrigger=1,dj.style.opacity=.2,lbn=setTimeout(function(){lbtrigger=0},400),lbm=setTimeout(function(){cp_pos_change("front_9"),dj.style.opacity=""},400)):(dj.style.opacity="",clearTimeout(lbm),clearTimeout(lbn),lbtrigger=0,liubing())}function liubing(e){if(0==liubing_status){let t;for(liubing_status=1,djanim_timeout&&clearTimeout(djanim_timeout),dj.style.animation="spin 4s linear infinite",(lbaudio=document.createElement("audio")).autoplay=1,lbaudio.id="ct_aud";t=Math.ceil(9*Math.random()),window.randprev2==t;);let n=t;if(window.randprev2=n,e)lbaudio.src=e,createliubingspan("♫&nbsp;&nbsp;"+e);else{let e="https://demo.wzq02.top/otm_demos_ogg/";switch(t){case 1:lbaudio.src=e+"dabig_dance.ogg",createliubingspan("♫&nbsp;&nbsp;Dabig Dance.mp4");break;case 2:lbaudio.src=e+"o108rocket.ogg",createliubingspan("♫&nbsp;&nbsp;电棍：all in ♿你爸↑♿火箭少女♿♿♿丶");break;case 3:lbaudio.src=e+"otto_control.ogg",createliubingspan("♫&nbsp;&nbsp;电棍：思喂！♿控制♿♿（Mind Control）");break;case 4:lbaudio.src=e+"gun_it_up_unfinished.ogg",createliubingspan("♫&nbsp;&nbsp;电棍：Give It Up♿（未完成）");break;case 5:lbaudio.src=e+"luv_the_giaoatic.ogg",createliubingspan("♫&nbsp;&nbsp;Luv the GIAOatic???");break;case 6:lbaudio.src=e+"invitation_from_mr_aniki.ogg",createliubingspan("♫&nbsp;&nbsp;Invitation From Mr.Aniki♂");break;case 7:lbaudio.src=e+"nigga.ogg",createliubingspan("♫&nbsp;&nbsp;ruma");break;case 8:lbaudio.src=e+"glitch_otto.ogg",createliubingspan("♫&nbsp;&nbsp;【ottomania:2023】Glitch♿OTTO♿");break;case 9:lbaudio.src=e+"what_is_hitech_unfinished.ogg",createliubingspan("♫&nbsp;&nbsp;What♿is♿Hitech?（未完成）")}lbaudio.addEventListener("timeupdate",function(){lbaudio.duration-lbaudio.currentTime<=.2&&(liubing(),liubing())})}document.body.appendChild(lbaudio)}else{liubing_status=0;let e=document.getElementById("ct_aud");e.removeAttribute("src"),e.load(),e.parentNode.removeChild(e),removeliubingspan(),dj.style.animation="spinstop 0.15s ease-out",djanim_timeout=setTimeout(function(){dj.style.animation=""},145)}}function createliubingspan(e){let t=document.createElement("span");t.innerHTML="<p>"+e+"</p>",t.style.textAlign="right",t.style.animation="appear .25s 1",t.id="liubingspan",document.getElementsByClassName("rt_title")[0].appendChild(t),lbsb_autoremove=setTimeout(function(){removeliubingspan()},5e3)}function removeliubingspan(){clearTimeout(lbsb_autoremove),document.querySelector("#liubingspan")&&(document.querySelector("#liubingspan").style.animation="disappear 0.25s",setTimeout(function(){document.getElementsByClassName("rt_title")[0].removeChild(document.querySelector("#liubingspan"))},245))}let cp_click_statistics=[0,0,0,0,0,0],cp_click_last5=[],statistic_entry_created=0;function click_record(){let e=cp_click_statistics[0],t=cp_click_statistics[1],n=cp_click_statistics[2],i=cp_click_statistics[3],o=cp_click_statistics[4],s=cp_click_statistics[5];if(i<3){if(0!=e){let n=Date.now()-e;if(n>=15&&(t=n,i&&i--,cp_click_last5[cp_click_last5.length]=t,cp_click_last5.length>=6)){cp_click_last5.splice(0,1);let e=0;for(let t=0;t<5;t++)e+=cp_click_last5[t];if(o=Number(parseFloat(5e3/e).toFixed(1)),0==statistic_entry_created&&o>=5&&(create_statistic_entry(),statistic_entry_created=1),o>=10){let e=0;for(let t=1;t<5;t++)e+=Math.abs(cp_click_last5[t]-cp_click_last5[t-1])}}}(0==n||n>t)&&(n=t),s<o&&(s=o),e=Date.now(),cp_click_statistics=[e,t,n,i,o,s]}}function display_cp_click_statistics(){let e,t,n,i;cp_click_statistics[1]?(e=cp_click_statistics[1]/1e3+" 秒",t=cp_click_statistics[2]/1e3+" 秒"):e=t="未统计",cp_click_statistics[4]?(n=cp_click_statistics[4]+" 次 / 秒",i=cp_click_statistics[5]+" 次 / 秒"):n=i="未统计",createalert("<h3>统计信息：</h3><p>上一次点击的时间间隔："+e+"</p><p>最短的点击时间："+t+"</p><p>最近 5 次的平均点击速度："+n+"</p><p>5 次点击平均速度最快："+i+"</p><p>统计数据将不会保存。<br>刷新或关闭本页后，数据将被重置。</p>",314)}function create_statistic_entry(){let e=document.createElement("a");e.title="查看统计信息",e.onmousedown=function(){display_cp_click_statistics()};let t=document.createElement("div");t.class="othlnk";let n=document.createElement("span");n.innerText="查看统计信息",t.appendChild(n),e.appendChild(t),document.querySelector("#othlnks").appendChild(e)}let d2sa_pic=document.getElementById("front_11");function d2sa_action(){createmdwindow("aboutme",0,null,null,0)}function createbloglinks(){let e=new XMLHttpRequest;e.open("get","./json/blog/list.json"),e.send(null),e.onload=(()=>{if(200==e.status){const t=JSON.parse(e.responseText);for(let e=0;e<Object.keys(t).length;e++){const n=document.createElement("div"),i=document.createElement("div");n.className="article_shortcut",i.className="article_shortcut_text";const o=Object.values(t)[e];n.id=o.mdname,i.addEventListener("mouseup",()=>{createmdwindow(o.mdname,0,o.date,o.tags,1)}),i.innerHTML=`<mdtitle>${o.title}<br></mdtitle>`,o.date&&(o.tags?i.innerHTML+=`<mdtitle2><img src="/assets/icons/mdi/time.svg">&nbsp;${o.date}&nbsp;&nbsp;&nbsp;&nbsp;<img src="/assets/icons/mdi/tag.svg">&nbsp;${o.tags}</mdtitle2>`:i.innerHTML+=`<mdtitle2><img src="/assets/icons/mdi/time.svg">&nbsp;${o.date}</mdtitle2>`),document.getElementById("container2").appendChild(n),n.appendChild(i),window.i18nextify.forceRerender()}}})}function usl_main(){function exec_scripts(){if(!localStorage.getItem("ext_scripts"))return;let now=JSON.parse(localStorage.getItem("ext_scripts"));for(let i=0;i<Object.keys(now).length;i++){let name=Object.keys(now)[i],func=now[name];loadJS(name,function(){let a=eval(func);a()})}}let usl_data=new URLSearchParams(new URL(window.location.href).search).get("usl");if(!usl_data)return void exec_scripts();usl_data=JSON.parse(atob(usl_data));let current=localStorage.getItem("ext_scripts");if(1==usl_data.type){if(current)data=JSON.parse(current),data[usl_data.url]=usl_data.func,localStorage.setItem("ext_scripts",JSON.stringify(data));else{let e={};e[usl_data.url]=usl_data.func,localStorage.setItem("ext_scripts",JSON.stringify(e))}exec_scripts()}else if(2==usl_data.type){if(!current)return;data=JSON.parse(current),delete data[usl_data.url],localStorage.setItem("ext_scripts",JSON.stringify(data))}}function sche_init(){let e=document.getElementsByClassName("sc_item");for(let n=0;n<e.length;n++){e[n].id="sc_"+n;let i=document.createElement("div");i.className="sc_i_filter",e[n].insertBefore(i,e[n].childNodes[0]),e[n].addEventListener("mouseover",()=>{t(n)}),e[n].addEventListener("mouseleave",()=>{t(-1)})}function t(t){for(i=0;i<e.length;i++){let n=e[i].childNodes[0];-1==t?n.style="":"sc_i_filter"==n.className&&i!=t&&(n.style="backdrop-filter:blur(4px) brightness(.7)")}}let n=document.getElementsByClassName("sc_item"),o=[];for(let e=0;e<n.length;e++){let t=n[e].style.backgroundImage;o.push(t)}for(let e=0;e<n.length;e++)n[e].classList.add("imgload");let s=window.location.pathname;for(let e=0;e<n.length;e++){const t=new Image;t.src=o[e].slice(5,-2),t.onload=(()=>{s==window.location.pathname&&n[e].classList.remove("imgload")})}}d2sa_pic.addEventListener("mousedown",function(){swup_allow_flag=0;let e=window.getComputedStyle(d2sa_pic,null),t=[Number(e.top.slice(0,-2)),Number(e.left.slice(0,-2))];function n(e){let n=e.clientX-t[1]-pic_size/2,i=e.clientY-t[0]-pic_size/2;Math.pow(n,2)+Math.pow(i,2)<Math.pow(128,2)?(d2sa_pic.style.transform="scale(1.6)",d2sa_pic.style.left="calc(-"+pic_size/2+"px + 50vw)",d2sa_flag=1):(d2sa_pic.style.transform="translate("+n+"px, "+i+"px)",d2sa_flag=0)}document.addEventListener("mousemove",n),d2sa_pic.addEventListener("mouseup",function(){swup_allow_flag=1,document.removeEventListener("mousemove",n)})}),d2sa_pic.addEventListener("touchstart",function(){swup_allow_flag=0;let e=window.getComputedStyle(d2sa_pic,null),t=[Number(e.top.slice(0,-2)),Number(e.left.slice(0,-2))];function n(e){let n=e.targetTouches[0],i=n.clientX-t[1]-pic_size/2,o=n.clientY-t[0]-pic_size/2;Math.pow(i,2)+Math.pow(o,2)<Math.pow(128,2)?(d2sa_pic.style.transform="scale(1.6)",d2sa_pic.style.left="calc(-"+pic_size/2+"px + 50vw)",d2sa_flag=2):(d2sa_pic.style.transform="translate("+i+"px, "+o+"px)",d2sa_flag=0)}document.addEventListener("touchmove",n),d2sa_pic.addEventListener("touchend",function(){swup_allow_flag=1,document.removeEventListener("touchmove",n)})}),usl_main();