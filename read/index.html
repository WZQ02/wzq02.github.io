<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>文章</title>
    <link rel="icon" type="image/png" href="/images/icon.png" />
    <link rel="shortcut icon" type="image/png" href="/images/icon.png" />
    <link rel="stylesheet" href="/css/pages.css" id="skin">
    <link rel="stylesheet" href="" id="color_scheme">
    <link rel="manifest" href="/manifest.json">
</head>
<style>
#mdcontent {
    user-select: text !important;
}
#mdcontent p {
    line-height: 160%;
}
#mdcontent p img {
    max-width: 100%;
}
#mdcontent ol li {
line-height: 160%;
}
pre {
    background-color: #222;
    border: 2px solid #777;
    border-radius: 4px;
    padding: 12px;
    overflow-x: scroll;
    line-height: normal;
}
code {
    font-family: "Consolas", "Courier New", monospace;
    font-size: 14px;
}
pre code {
    color: #fff;
}
table {
    background-color: rgba(127,127,127,0.6);
}
table th {
    background-color: rgba(255,255,255,0.6);
    padding: 4px 8px;
}
table td {
    background-color: rgba(255,255,255,0.8);
    padding: 4px 8px;
}
@media (prefers-color-scheme: dark) {
    table th {
        background-color: rgba(0,0,0,0.6);
        padding: 4px 8px;
    }
    table td {
        background-color: rgba(0,0,0,0.8);
        padding: 4px 8px;
    }
}
</style>
<body>
<div id="largetitle"></div>
<div id="container">
    <div id="mdcontent"></div>
    <a id="btm" href="javascript:void(0)" onclick="back()">返回主页</a></h4>
</div>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script>
    function back() {
        window.location.href = "/index.html";
    }
    suffixdetect();
    autochgthemecolor();
    function getCookie(cname) {//cookie设置
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for (var i=0; i<ca.length; i++) {
            var c = ca[i].trim();
           if (c.indexOf(name)==0) return c.substring(name.length,c.length);
        }
       return "";
    }
    function autochgthemecolor() {//自动更改配色方案
        var color = getCookie('themecolor');
        if (color != "") {
            document.getElementById("color_scheme").href = "/css/docu_"+color+".css";
        }
    }
    function suffixdetect() {
        var url = window.location.href;
        if (url.indexOf("mdname=") != -1) {
            var mdname = (url.slice(url.indexOf("mdname=")+7));
            getmdfile(mdname)
        } else if (url.indexOf("mdname2=") != -1) {
            var mdname = (url.slice(url.indexOf("mdname2=")+8));
            getmdfile2(mdname)
        }
    }
    function getmdfile(mdname) {
        var request = new XMLHttpRequest();
        var mdc;
        request.open("get", "/md/"+mdname+".md");
        request.send(null);
        request.onload = function () {
            if (request.status == 200) {
                mdc = request.responseText;
                rendermd(mdc);
            }
        }
    }
    function getmdfile2(mdname) {//外部md文件
        var request = new XMLHttpRequest();
        var mdc;
        request.open("get", mdname);
        request.send(null);
        request.onload = function () {
            if (request.status == 200) {
                mdc = request.responseText;
                rendermd(mdc);
            }
        }
    }
    function rendermd(mdc) {
        var mdc_show = document.getElementById("mdcontent");
        text = mdc,
        html = marked.parse(text);
        mdc_show.innerHTML = html;
        if (document.getElementsByTagName("h1")[0]) {
            document.title = document.getElementsByTagName("h1")[0].innerText;
        }
        for (i=0; i<127; i++) {
        if (mdc_show.childNodes[i]) {
            if (typeof(mdc_show.childNodes[i].childNodes[0]) == "object") {
                if (mdc_show.childNodes[i].childNodes[0].alt) {
                    var alt_text = document.createElement("p");
                    alt_text.innerText = mdc_show.childNodes[i].childNodes[0].alt;
                    alt_text.style = "opacity: 0.75; text-align: center";
                    mdc_show.childNodes[i].appendChild(alt_text);
                }
            }
        } else {
            break;
        }
        }
    }
</script>
</body>
</html>
